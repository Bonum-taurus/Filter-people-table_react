(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r,c,a=n(6),s=n(23),i=n.n(s),l=(n(28),n(29),n(3)),o=n(1),d=function(e){return e.isActive?"navbar-item has-background-grey-lighter":"navbar-item"},j=function(){var e=Object(l.n)().search;return Object(o.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("div",{className:"navbar-brand",children:[Object(o.jsx)(a.c,{className:d,to:"/",children:"Home"}),Object(o.jsx)(a.c,{"aria-current":"page",className:d,to:"/people".concat(e),children:"People"})]})})})},u=(n(32),function(){return Object(o.jsxs)("div",{"data-cy":"app",children:[Object(o.jsx)(j,{}),Object(o.jsx)("div",{className:"section",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsx)(l.b,{})})})]})}),b=n(5),h=n(0);!function(e){e.all="all",e.male="m",e.female="f"}(r||(r={})),function(e){e.sex="sex",e.query="query",e.centuries="centuries"}(c||(c={}));var f,p=function(){var e=Object(a.d)(),t=Object(b.a)(e,2),n=t[0],s=t[1],i=n.get(c.sex)||"",l=n.get(c.query)||"",d=n.getAll(c.centuries)||"",j=function(e){return function(t){t.preventDefault();var a=new URLSearchParams(n);if(e===r.all)return a.delete(c.sex),void s(a);a.set(c.sex,e),s(a)}},u=function(e){return function(t){t.preventDefault();var r=new URLSearchParams(n);if(d.includes(e))return r.delete(c.centuries),d.forEach((function(t){t!==e&&r.append(c.centuries,t)})),void s(r);r.append(c.centuries,e),s(r)}};return Object(o.jsxs)("nav",{className:"panel",children:[Object(o.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(o.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(o.jsx)(a.b,{className:i?"":"is-active",to:"/people?".concat(n.toString()),onClick:j(r.all),children:"All"}),Object(o.jsx)(a.b,{className:i===r.male?"is-active":"",to:"/people",onClick:j(r.male),children:"Male"}),Object(o.jsx)(a.b,{className:i===r.female?"is-active":"",to:"/people",onClick:j(r.female),children:"Female"})]}),Object(o.jsx)("div",{className:"panel-block",children:Object(o.jsxs)("p",{className:"control has-icons-left",children:[Object(o.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:l,onChange:function(e){var t=new URLSearchParams(n);if(!e.target.value)return t.delete(c.query),void s(t);t.set(c.query,e.target.value),s(t)}}),Object(o.jsx)("span",{className:"icon is-left",children:Object(o.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(o.jsx)("div",{className:"panel-block",children:Object(o.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(o.jsxs)("div",{className:"level-left",children:[Object(o.jsx)(a.c,{"data-cy":"century",className:"button mr-1 ".concat(d.includes("16")&&"is-info"),to:"/people?centuries=16",onClick:u("16"),children:"16"}),Object(o.jsx)(a.b,{"data-cy":"century",className:"button mr-1 ".concat(d.includes("17")&&"is-info"),to:"/people?centuries=17",onClick:u("17"),children:"17"}),Object(o.jsx)(a.b,{"data-cy":"century",className:"button mr-1 ".concat(d.includes("18")&&"is-info"),to:"/people?centuries=18",onClick:u("18"),children:"18"}),Object(o.jsx)(a.b,{"data-cy":"century",className:"button mr-1 ".concat(d.includes("19")&&"is-info"),to:"/people?centuries=19",onClick:u("19"),children:"19"}),Object(o.jsx)(a.b,{"data-cy":"century",className:"button mr-1 ".concat(d.includes("20")&&"is-info"),to:"/people?centuries=20",onClick:u("20"),children:"20"})]}),Object(o.jsx)("div",{className:"level-right ml-4",children:Object(o.jsx)(a.b,{"data-cy":"centuryALL",className:"button is-success ".concat(!!d.length&&"is-outlined"),to:"/people",onClick:function(e){e.preventDefault(),n.delete(c.centuries),s(n)},children:"All"})})]})}),Object(o.jsx)("div",{className:"panel-block",children:Object(o.jsx)(a.b,{className:"button is-link is-outlined is-fullwidth",to:"/people",onClick:function(e){e.preventDefault();var t=new URLSearchParams;n.forEach((function(e,n){"sort"!==n&&"order"!==n||t.set(n,e)})),s(t)},children:"Reset all filters"})})]})},m=(n(33),function(){return Object(o.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(o.jsx)("div",{className:"Loader__content"})})}),x=n(17),O=n.n(x);!function(e){e.female="f"}(f||(f={}));var v,N,g,k=function(e){var t=e.person,n=e.people,r=Object(l.r)().personId,c=Object(a.d)(),s=Object(b.a)(c,1)[0],i=t.name,d=t.sex,j=t.born,u=t.died,h=t.motherName,p=t.fatherName,m=t.slug,x=n.find((function(e){return e.name===h})),O=n.find((function(e){return e.name===p}));return Object(o.jsxs)("tr",{"data-cy":"person",className:r===m?"has-background-warning":"",children:[Object(o.jsx)("td",{children:Object(o.jsx)(a.b,{to:"/people/".concat(m,"?").concat(s.toString()),className:d===f.female?"has-text-danger":"",children:i})}),Object(o.jsx)("td",{children:d}),Object(o.jsx)("td",{children:j}),Object(o.jsx)("td",{children:u}),Object(o.jsx)("td",{children:x?Object(o.jsx)(a.b,{to:"/people/".concat(x.slug,"?").concat(s.toString()),className:"has-text-danger",children:x.name}):h||"-"}),Object(o.jsx)("td",{children:O?Object(o.jsx)(a.b,{to:"/people/".concat(O.slug,"?").concat(s.toString()),children:O.name}):p||"-"})]})};!function(e){e.male="m",e.female="f"}(v||(v={})),function(e){e.sex="sex",e.sort="sort",e.query="query",e.order="order",e.centuries="centuries"}(N||(N={})),function(e){e.sex="sex",e.name="name",e.born="born",e.died="died",e.desc="desc"}(g||(g={}));var w=function(e){var t=e.people,n=Object(a.d)(),r=Object(b.a)(n,2),c=r[0],s=r[1],i=c.get(N.sex)||"",l=c.get(N.sort)||"",d=c.get(N.query)||"",j=c.get(N.order)||"",u=c.getAll(N.centuries)||"",h=function(e){return u.length>0?e.filter((function(e){var t=Math.ceil(e.born/100);return u.includes(t.toString())})):e},f=function(e){var t=d.toLowerCase();return e.filter((function(e){var n,r;return(e.name.toLowerCase().includes(t)||(null===(n=e.fatherName)||void 0===n?void 0:n.toLowerCase().includes(t))||!!(null===(r=e.motherName)||void 0===r?void 0:r.toLowerCase().includes(t)))&&e}))},p=function(e,t){switch(e.preventDefault(),t){case g.name:var n=new URLSearchParams(c);if(n.has(N.order)&&l===g.name){n.delete(N.order),n.delete(N.sort),s(n);break}if(n.has(N.order)&&l!==g.name){n.delete(N.order),n.set(N.sort,g.name),s(n);break}if(l===g.name){n.set(N.order,g.desc),s(n);break}n.set(N.sort,g.name),s(n);break;case g.sex:var r=new URLSearchParams(c);if(r.has(N.order)&&l===g.sex){r.delete(N.order),r.delete(N.sort),s(r);break}if(r.has(N.order)&&l!==g.sex){r.delete(N.order),r.set(N.sort,g.sex),s(r);break}if(l===g.sex){r.set(N.order,g.desc),s(r);break}r.set(N.sort,g.sex),s(r);break;case g.born:var a=new URLSearchParams(c);if(a.has(N.order)&&l===g.born){a.delete(N.order),a.delete("sort"),s(a);break}if(a.has(N.order)&&l!==g.born){a.delete(N.order),a.set(N.sort,g.born),s(a);break}if(l===g.born){a.set(N.order,g.desc),s(a);break}a.set(N.sort,g.born),s(a);break;case g.died:var i=new URLSearchParams(c);if(i.has(N.order)&&l===g.died){i.delete(N.order),i.delete("sort"),s(i);break}if(i.has(N.order)&&l!==g.died){i.delete(N.order),i.set(N.sort,g.died),s(i);break}if(l===g.died){i.set(N.order,g.desc),s(i);break}i.set(N.sort,g.died),s(i)}},m=function(e){switch(l){case g.name:return j?e.sort((function(e,t){return t.name.localeCompare(e.name)})):e.sort((function(e,t){return e.name.localeCompare(t.name)}));case g.sex:return j?e.sort((function(e,t){return t.sex.localeCompare(e.sex)})):e.sort((function(e,t){return e.sex.localeCompare(t.sex)}));case g.born:return j?e.sort((function(e,t){return t.born-e.born})):e.sort((function(e,t){return e.born-t.born}));case g.died:return j?e.sort((function(e,t){return t.died-e.died})):e.sort((function(e,t){return e.died-t.died}));default:return e}}(function(e){switch(i){case v.female:var t=e.filter((function(e){return e.sex===v.female}));return h(f(t));case v.male:var n=e.filter((function(e){return e.sex===v.male}));return h(f(n));default:return h(f(e))}}(t));return Object(o.jsx)(o.Fragment,{children:m.length?Object(o.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:Object(o.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(o.jsx)(a.b,{to:"/people",children:Object(o.jsx)("span",{className:"icon",onClick:function(e){return p(e,g.name)},"aria-hidden":"true",children:Object(o.jsx)("i",{className:O()("fas",{"fa-sort":l!==g.name,"fa-sort-up":l===g.name&&!j,"fa-sort-down":l===g.name&&!!j})})})})]})}),Object(o.jsx)("th",{children:Object(o.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(o.jsx)(a.b,{to:"/people",children:Object(o.jsx)("span",{className:"icon",onClick:function(e){return p(e,g.sex)},"aria-hidden":"true",children:Object(o.jsx)("i",{className:O()("fas",{"fa-sort":l!==g.sex,"fa-sort-up":l===g.sex&&!j,"fa-sort-down":l===g.sex&&!!j})})})})]})}),Object(o.jsx)("th",{children:Object(o.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(o.jsx)(a.b,{to:"/people",children:Object(o.jsx)("span",{className:"icon",onClick:function(e){return p(e,g.born)},"aria-hidden":"true",children:Object(o.jsx)("i",{className:O()("fas",{"fa-sort":l!==g.born,"fa-sort-up":l===g.born&&!j,"fa-sort-down":l===g.born&&!!j})})})})]})}),Object(o.jsx)("th",{children:Object(o.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(o.jsx)(a.b,{to:"/people",children:Object(o.jsx)("span",{className:"icon",onClick:function(e){return p(e,g.died)},"aria-hidden":"true",children:Object(o.jsx)("i",{className:O()("fas",{"fa-sort":l!==g.died,"fa-sort-up":l===g.died&&!j,"fa-sort-down":l===g.died&&!!j})})})})]})}),Object(o.jsx)("th",{children:"Mother"}),Object(o.jsx)("th",{children:"Father"})]})}),Object(o.jsx)("tbody",{children:m.map((function(e){return Object(o.jsx)(k,{person:e,people:t},e.slug)}))})]}):Object(o.jsx)("p",{children:"There are no people matching the current search criteria"})})},y=n(4),C=n.n(y),S=n(7),L="https://mate-academy.github.io/react_people-table/api/people.json";function P(e){return new Promise((function(t){return setTimeout(t,e)}))}function R(){return(R=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P(500).then((function(){return fetch(L)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=function(){var e=Object(h.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],c=Object(h.useState)(!1),a=Object(b.a)(c,2),s=a[0],i=a[1],l=Object(h.useState)(!1),d=Object(b.a)(l,2),j=d[0],u=d[1];return Object(h.useEffect)((function(){i(!0),function(){return R.apply(this,arguments)}().then(r).catch((function(){return u(!0)})).finally((function(){return i(!1)}))}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{className:"title",children:"People Page"}),Object(o.jsx)("div",{className:"block",children:Object(o.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[!!n.length&&!j&&Object(o.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(o.jsx)(p,{})}),Object(o.jsx)("div",{className:"column",children:Object(o.jsxs)("div",{className:"box table-container",children:[s&&Object(o.jsx)(m,{}),!n.length&&!s&&!j&&Object(o.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),!!n.length&&!j&&Object(o.jsx)(w,{people:n}),j&&Object(o.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"})]})})]})})]})},F=function(){return Object(o.jsx)(l.e,{children:Object(o.jsxs)(l.c,{path:"/",element:Object(o.jsx)(u,{}),children:[Object(o.jsx)(l.c,{index:!0,element:Object(o.jsx)("h1",{className:"title",children:"Home Page"})}),Object(o.jsx)(l.c,{path:"people",element:Object(o.jsx)(q,{}),children:Object(o.jsx)(l.c,{path:":personId"})}),Object(o.jsx)(l.c,{path:"/home",element:Object(o.jsx)(l.a,{to:"/",replace:!0})}),Object(o.jsx)(l.c,{path:"*",element:Object(o.jsx)("h1",{className:"title",children:"Page not found"})})]})})};i.a.render(Object(o.jsx)(a.a,{children:Object(o.jsx)(F,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.709ec33c.chunk.js.map